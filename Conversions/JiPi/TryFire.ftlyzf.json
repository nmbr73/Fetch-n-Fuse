{"Shader":{"ver":"0.1","info":{"id":"ftlyzf","date":"1648450396","viewed":42,"name":"try fire","username":"cailuming","description":"try some 2d fire , and make fun","likes":3,"published":3,"flags":0,"usePreview":0,"tags":["fire2d"],"hasliked":0},"renderpass":[{"inputs":[{"id":30,"src":"\/media\/a\/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","ctype":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":37,"channel":0}],"code":"#define PI 3.1415926\n#define SEMI_PI 1.5707963\n\/\/from iq\nvec3 palete(float h,float s,float v){\n   vec3 a = vec3(v,v,v);\n   vec3 b = vec3(s,s,s);\n   vec3 c = vec3(1,1,1);\n   \n   vec3 d = vec3(0.0,0.33,0.67);\n   return a+b*cos(2.0*PI*(c*h+d)); \n} \n\nmat2 rot2D(float a){\n   float c = cos(a);\n   float s = sin(a);\n   return mat2(c,s,-s,c); \n}\n\n\/\/from iq https:\/\/www.iquilezles.org\/www\/articles\/fbm\/fbm.htm\nfloat fbm(vec2 uv) {\n    float total = 0.0, amp = 1.0,freq = 1.0;\n    float G = exp(-0.7);\n    for (int i = 0; i <6; i++) {\n        \/\/total += noise(uv*freq) * amp;\n        total += texture(iChannel0,uv*freq).x * amp;\n        freq = freq*2.0;\n        amp *= G;\n    }\n    return total;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv   = fragCoord.xy \/ iResolution.xy-vec2(0.5);\n    vec2 cuv  = vec2(uv.x*(iResolution.x\/iResolution.y),uv.y);\n    float id  = floor(cuv.x\/0.4);\n    cuv.x     = mod(cuv.x,0.4)-0.2;\n    vec3 col  = vec3(0); \n    vec2 dir  = vec2(0,1)*rot2D(0.); cuv.y+=0.2;\n    \n    float f   = fbm((cuv-dir*(iTime+id)*0.8)*0.031);\n    vec2  suv = normalize(vec2(cuv.x,cuv.y*0.23));\n    float dp  = clamp(dot(dir,suv),0.0,1.0);\n      \n    float v   = pow((0.2*dp)\/length(suv)\/length(cuv),5.0)*dp*pow(f,f*9.0);\n    col = vec3(1.1,1.1,0.8)*cuv.x; \n    col += mix(v,pow(0.025*f\/length(vec2(cuv.x,cuv.y-0.02)),8.0),0.5);\n    col*= palete(0.94+id*0.28,1.0,1.0);\n     \n    col = smoothstep(0.0,1.0,col);\n    \/\/col = pow(col,vec3(1.6));\n\tfragColor = vec4(col,1.);\n}\n  \n","name":"Image","description":"","type":"image"}]}}