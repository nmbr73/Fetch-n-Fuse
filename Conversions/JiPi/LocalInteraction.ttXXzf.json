{"Shader":{"ver":"0.1","info":{"id":"ttXXzf","date":"1563725698","viewed":1151,"name":"Local Interaction","username":"wyatt","description":"Directional feedback system. ","likes":55,"published":3,"flags":32,"usePreview":0,"tags":["automata"],"hasliked":0},"renderpass":[{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":37,"channel":0}],"code":"#define A(COORD) texture(iChannel0,(COORD)\/iResolution.xy)\nfloat ln (vec3 p, vec3 a, vec3 b) {return length(p-a-(b-a)*min(dot(p-a,b-a),0.)\/dot(b-a,b-a));}\nvoid mainImage( out vec4 Q, in vec2 U )\n{\n    Q  =  A(U);\n    vec4 pX  =  A(U + vec2(1,0));\n    vec4 pY  =  A(U + vec2(0,1));\n    vec4 nX  =  A(U - vec2(1,0));\n    vec4 nY  =  A(U - vec2(0,1));\n    vec3 n = normalize(vec3(pX.z-nX.z,pY.z-nY.z,1));\n    vec3 r = reflect(n,vec3(0,0,-1));\n    Q = (0.5+0.5*sin(iTime+atan(Q.x,Q.y)*vec4(3,2,1,4)));\n    float d = ln(vec3(.4,.4,6)*iResolution.xyy,\n                 vec3(U,0),vec3(U,0)+r)\/iResolution.y;\n    Q *= exp(-d*d)*.5+.5*exp(-3.*d*d);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":257,"channel":0}],"code":"#define A(COORD) texture(iChannel0,(COORD)\/iResolution.xy)\n\nvoid mainImage( out vec4 Q, in vec2 U )\n{\n    U-=.5*iResolution.xy;\n    U *= .997;\n    float a = .003*sin(.5*iTime-2.*length(U-0.5*iResolution.xy)\/iResolution.y);\n    U *= mat2(cos(a),-sin(a),sin(a),cos(a));\n    U+=.5*iResolution.xy;\n    Q  =  A(U);\n    \/\/ Neighborhood :\n    vec4 pX  =  A(U + vec2(1,0));\n    vec4 pY  =  A(U + vec2(0,1));\n    vec4 nX  =  A(U - vec2(1,0));\n    vec4 nY  =  A(U - vec2(0,1));\n    vec4 m = 0.25*(pX+nX+pY+nY);\n    float b = mix(1.,abs(Q.z),.8);\n    Q.xyz += (1.-b)*(0.25*vec3(pX.z-nX.z,pY.z-nY.z,-pX.x+nX.x-pY.y+nY.y)- Q.xyz);\n\n    \n    Q = mix(Q,m,b);\n    \n    if (length(Q.xy)>0.) Q.xy = normalize(Q.xy);\n    \n    if(iFrame < 1) Q = sin(.01*length(U-0.5*iResolution.xy)*vec4(1,2,3,4));\n    \n    if (iMouse.z>0.&&length(U-iMouse.xy)<.1*iResolution.y) Q *= 0.;\n    \n}","name":"Buffer A","description":"","type":"buffer"}]}}