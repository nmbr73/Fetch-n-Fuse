{"Shader":{"ver":"0.1","info":{"id":"ssGBRz","date":"1657549994","viewed":116,"name":"Organic growth w\/ convolution","username":"ninofiliu","description":"Paint by dragging your mouse across!\n\nUsed a convolution matrix that accentuates certain frequencies in order to smooth out a bunch of lines that can be drawn w\/ your mouse","likes":0,"published":3,"flags":32,"usePreview":0,"tags":["convolution","smooth","backbuffer"],"hasliked":0},"renderpass":[{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":37,"channel":0}],"code":"\/\/ This just paints whatever is in BufferA\nvoid mainImage(out vec4 color, in vec2 coord) {\n    vec2 uv = coord \/ iResolution.xy;\n    color = texture(iChannel0, uv);    \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":257,"channel":0}],"code":"\/\/ blur convolution\n\/*\nconst int r = 1;\nconst int l = (2*r+1)*(2*r+1);\nfloat m[l] = float[](\n    0., 1., 0.,\n    1., 0., 1.,\n    0., 1., 0.\n);\nfloat mt = 4.01;\n*\/\n\n\/\/ organic growth convolution\nconst int r = 1;\nconst int l = (2*r+1)*(2*r+1);\nfloat m[l] = float[](\n    -1., 5., -1.,\n    5., 0., 5.,\n    -1., 5., -1.\n);\nfloat mt = 16.1;\n\nvoid mainImage(out vec4 color, in vec2 coord) {\n    color.rgb = vec3(0.);\n\n    vec2 uv = coord \/ iResolution.xy;\n    vec2 mouseUv = iMouse.xy \/ iResolution.xy;\n    \n    for (int x = -1; x <=1; x++) {\n        for (int y = -1; y <=1; y++) {\n            int i = (y+1)*3+x+1;\n            float v = m[i] \/ mt;\n            color += 0.9 * v * texture(\n                iChannel0,\n                vec2(\n                    uv.x+float(x)\/iResolution.x,\n                    uv.y+float(y)\/iResolution.y\n                )\n            );\n        }\n    }        \n    \n    if (distance(uv, mouseUv) < 0.05 && iMouse.z > 0.) {\n        color.rgb = 1. - color.rgb;\n    }\n    \n    color.rgb = clamp(color.rgb, 0., 1.);\n    \n}","name":"Buffer A","description":"","type":"buffer"}]}}