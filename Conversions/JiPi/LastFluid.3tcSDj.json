{"Shader":{"ver":"0.1","info":{"id":"3tcSDj","date":"1581663833","viewed":494,"name":"Last Fluid","username":"wyatt","description":"This is it, this is as good as it gets.\nJust so you know, before me, realtime fluids were not physical... Pressure was computed per frame rather than being treated as a living variable.","likes":21,"published":3,"flags":32,"usePreview":0,"tags":["fluid"],"hasliked":0},"renderpass":[{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":258,"src":"\/media\/previz\/buffer01.png","ctype":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":37,"channel":0}],"code":"Main {\n    vec4 b = B(U);\n    Q = abs(sin(b+b.w));\n        \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":258,"src":"\/media\/previz\/buffer01.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":257,"channel":0}],"code":"Main {\n\tQ = B(U-B(U).xy);\n    Neighborhood;\n    Q.xy -= grd;   \n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((iMouse.z>0.&&length(U-iMouse.xy)<10.)||(iFrame<1&&length(U-0.5*R)<6.))Q.xyw = vec3(0.4*sin(0.2*iTime),0.4*cos(0.2*iTime),1);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":258,"src":"\/media\/previz\/buffer01.png","ctype":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":258,"channel":0}],"code":"Main {\n\tQ = B(U-A(U).xy);\n    Neighborhood;\n    Q.w  -= div;\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNeighborhood2; Q.xyz -= 0.25*(N*n.y-S*s.y+E*e.x-W*w.x).xyz;\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((iMouse.z>0.&&length(U-iMouse.xy)<10.)||(iFrame<1&&length(U-0.5*R)<6.))Q.xyz = abs(vec3(sin(0.2121*iTime),cos(0.43*iTime),sin(.333*iTime)));\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)\/R)\n#define B(U) texture(iChannel1,(U)\/R)\n#define C(U) texture(iChannel2,(U)\/R)\n#define D(U) texture(iChannel3,(U)\/R)\n#define Neighborhood vec4 n = A(U+vec2(0,1)), e = A(U+vec2(1,0)), s = A(U-vec2(0,1)), w = A(U-vec2(1,0)), m = 0.25*(n+e+s+w);\n#define Neighborhood2 vec4 N = B(U+vec2(0,1)), E = B(U+vec2(1,0)), S = B(U-vec2(0,1)), W = B(U-vec2(1,0)), M = 0.25*(n+e+s+w);\n#define grd 0.25*vec2(e.w-w.w,n.w-s.w);\n#define div 0.25*(e.x-w.x+n.y-s.y);\n#define Main void mainImage(out vec4 Q, vec2 U)\n","name":"Common","description":"","type":"common"}]}}