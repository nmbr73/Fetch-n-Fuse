{"Shader":{"ver":"0.1","info":{"id":"7tBBRh","date":"1651758658","viewed":74,"name":"little exploders","username":"eiffie","description":"little exploding things","likes":5,"published":3,"flags":40,"usePreview":0,"tags":["simulation"],"hasliked":0},"renderpass":[{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":37,"channel":0}],"code":"float BG(vec2 u){u=sin(u+sin(u.yx+iTime*.1));return (u.x*u.y+u.x+u.y)*.025+0.05;}\nvec4 cmap(float a){a=clamp(a,0.,1.6);return a*abs(vec4(sin(a),sin(a+.4),sin(a+1.7),1.));}\nvoid mainImage(out vec4 O, in vec2 U){\n  O=U.y>1.?cmap(BG(U*0.01)+BG(U.yx*0.03)*.2+texture(iChannel0,U\/iResolution.xy).r):vec4(0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":257,"src":"\/media\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":257,"channel":0}],"code":"#define dot2(x) dot(x,x)\nvoid mainImage(out vec4 O, in vec2 U){\n  int X=int(floor(U.x));\n  O=texture(iChannel0,U\/iResolution.xy);\n  bool bLogic=(U.y<1. && U.x<256.);\n  if(iFrame<2)O=vec4(bLogic?vec2(cos(U.x),sin(U.x))*100.:vec2(0),0.,0.);\n  U-=iResolution.xy*.5;\n  float d=100.;\n  for(int i=0;i<256;i++){\n    vec4 v=texture(iChannel0,vec2(float(i)+.5,.5)\/iResolution.xy);\n    if(bLogic){\n      if(i!=X){\n        vec2 dlt=v.xy-O.xy,a=sign(dlt)\/max(4.,dot2(dlt));\n        float m=min(1.,.98+dot2(v.zw-O.zw)*0.0001+dot2(dlt)*0.0001);\n        O.zw=O.zw*m+a;\n      }\n    }else d=min(d,length(U-v.xy));\n  }\n  if(bLogic){O.xy+=O.zw;O.zw-=sign(O.xy)*length(O.xy)*0.00001;}\n  else O.r=O.r*.98+.2*smoothstep(10.\/iResolution.y,0.,d*.03);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"int N[8]=int[8](-1,-5,0,0,0,-5,4,7);\nfloat I(int n, float t, float d){\n  int n2=(n+48)%12;float e=1.+sin(float(n))*.2-t*t*.5;\n  if((n2==1)||(n2==4)||(n2==6)||(n2==8)||(n2==11))return 0.;\/\/dorian\n  return pow(fract(t*50.*pow(2.,float(n)\/(12.-e*e*.05))),.5+t*t*d)*e;\n}\nvec2 Sound(float time){\n  float tim=time*7.,b=floor(tim),b3=fract(tim\/8.),b2=fract(tim\/2.),b1=fract(tim);\n  int n3=N[(int(b\/128.)*2)%8]+N[int(b\/8.)%8];\n  int n2=n3+N[int(b\/2.)%8],n=n2+N[int(b)%8];\n  return vec2(I(n,b1,200.)*.65-I(n2+3,b2*1.005,30.)*.75,\n   -I(n+5,b1*1.007,200.)*.5+I(n2,b2,20.)*.75-I(n3,b3*1.001,20.));\n}\nvec2 mainSound(int samp, float time){\n  return Sound(time)*.1+Sound(time-.075).yx*.08-Sound(time-.15)*0.05;\n}","name":"Sound","description":"","type":"sound"}]}}